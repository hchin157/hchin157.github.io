(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
module.exports={
  "full_species_list":[
      {"name": "Bulbasaur"},
      {"name": "Ivysaur"},
      {"name": "Venusaur"},
      {"name": "Charmander"},
      {"name": "Charmeleon"},
      {"name": "Charizard"},
      {"name": "Squirtle"},
      {"name": "Wartortle"},
      {"name": "Blastoise"},
      {"name": "Chespin"},
      {"name": "Quilladin"},
      {"name": "Chesnaught"},
      {"name": "Fennekin"},
      {"name": "Braixen"},
      {"name": "Delphox"},
      {"name": "Froakie"},
      {"name": "Frogadier"},
      {"name": "Greninja"},
      {"name": "Turtwig"},
      {"name": "Grotle"},
      {"name": "Torterra"},
      {"name": "Chimchar"},
      {"name": "Monferno"},
      {"name": "Infernape"},
      {"name": "Piplup"},
      {"name": "Prinplup"},
      {"name": "Empoleon"},
      {"name": "Starly"},
      {"name": "Staravia"},
      {"name": "Staraptor"},
      {"name": "Bidoof"},
      {"name": "Bibarel"},
      {"name": "Kricketot"},
      {"name": "Kricketune"},
      {"name": "Shinx"},
      {"name": "Luxio"},
      {"name": "Luxray"},
      {"name": "Abra"},
      {"name": "Kadabra"},
      {"name": "Alakazam"},
      {"name": "Magikarp"},
      {"name": "Gyarados"},
      {"name": "Budew"},
      {"name": "Roselia"},
      {"name": "Roserade"},
      {"name": "Zubat"},
      {"name": "Golbat"},
      {"name": "Crobat"},
      {"name": "Geodude"},
      {"name": "Graveler"},
      {"name": "Golem"},
      {"name": "Onix"},
      {"name": "Steelix"},
      {"name": "Cranidos"},
      {"name": "Rampardos"},
      {"name": "Shieldon"},
      {"name": "Bastiodon"},
      {"name": "Machop"},
      {"name": "Machoke"},
      {"name": "Machamp"},
      {"name": "Psyduck"},
      {"name": "Golduck"},
      {"name": "Burmy"},
      {"name": "Wormadam"},
      {"name": "Mothim"},
      {"name": "Wurmple"},
      {"name": "Silcoon"},
      {"name": "Beautifly"},
      {"name": "Cascoon"},
      {"name": "Dustox"},
      {"name": "Combee"},
      {"name": "Vespiquen"},
      {"name": "Pachirisu"},
      {"name": "Buizel"},
      {"name": "Floatzel"},
      {"name": "Cherubi"},
      {"name": "Cherrim"},
      {"name": "Shellos"},
      {"name": "Gastrodon"},
      {"name": "Heracross"},
      {"name": "Aipom"},
      {"name": "Ambipom"},
      {"name": "Drifloon"},
      {"name": "Drifblim"},
      {"name": "Buneary"},
      {"name": "Lopunny"},
      {"name": "Gastly"},
      {"name": "Haunter"},
      {"name": "Gengar"},
      {"name": "Misdreavus"},
      {"name": "Mismagius"},
      {"name": "Murkrow"},
      {"name": "Honchkrow"},
      {"name": "Glameow"},
      {"name": "Purugly"},
      {"name": "Goldeen"},
      {"name": "Seaking"},
      {"name": "Barboach"},
      {"name": "Whiscash"},
      {"name": "Chingling"},
      {"name": "Chimecho"},
      {"name": "Stunky"},
      {"name": "Skuntank"},
      {"name": "Meditite"},
      {"name": "Medicham"},
      {"name": "Bronzor"},
      {"name": "Bronzong"},
      {"name": "Ponyta"},
      {"name": "Rapidash"},
      {"name": "Bonsly"},
      {"name": "Sudowoodo"},
      {"name": "Mime Jr."},
      {"name": "Mr. Mime"},
      {"name": "Happiny"},
      {"name": "Chansey"},
      {"name": "Blissey"},
      {"name": "Cleffa"},
      {"name": "Clefairy"},
      {"name": "Clefable"},
      {"name": "Chatot"},
      {"name": "Pichu"},
      {"name": "Pikachu"},
      {"name": "Raichu"},
      {"name": "Hoothoot"},
      {"name": "Noctowl"},
      {"name": "Spiritomb"},
      {"name": "Gible"},
      {"name": "Gabite"},
      {"name": "Garchomp"},
      {"name": "Munchlax"},
      {"name": "Snorlax"},
      {"name": "Unown"},
      {"name": "Riolu"},
      {"name": "Lucario"},
      {"name": "Wooper"},
      {"name": "Quagsire"},
      {"name": "Wingull"},
      {"name": "Pelipper"},
      {"name": "Girafarig"},
      {"name": "Hippopotas"},
      {"name": "Hippowdon"},
      {"name": "Azurill"},
      {"name": "Marill"},
      {"name": "Azumarill"},
      {"name": "Skorupi"},
      {"name": "Drapion"},
      {"name": "Croagunk"},
      {"name": "Toxicroak"},
      {"name": "Carnivine"},
      {"name": "Remoraid"},
      {"name": "Octillery"},
      {"name": "Finneon"},
      {"name": "Lumineon"},
      {"name": "Tentacool"},
      {"name": "Tentacruel"},
      {"name": "Feebas"},
      {"name": "Milotic"},
      {"name": "Mantyke"},
      {"name": "Mantine"},
      {"name": "Snover"},
      {"name": "Abomasnow"},
      {"name": "Sneasel"},
      {"name": "Weavile"},
      {"name": "Rotom"},
      {"name": "Gligar"},
      {"name": "Gliscor"},
      {"name": "Nosepass"},
      {"name": "Probopass"},
      {"name": "Ralts"},
      {"name": "Kirlia"},
      {"name": "Gardevoir"},
      {"name": "Gallade"},
      {"name": "Lickitung"},
      {"name": "Lickilicky"},
      {"name": "Eevee"},
      {"name": "Vaporeon"},
      {"name": "Jolteon"},
      {"name": "Flareon"},
      {"name": "Espeon"},
      {"name": "Umbreon"},
      {"name": "Leafeon"},
      {"name": "Glaceon"},
      {"name": "Sylveon"},
      {"name": "Swablu"},
      {"name": "Altaria"},
      {"name": "Togepi"},
      {"name": "Togetic"},
      {"name": "Togekiss"},
      {"name": "Houndour"},
      {"name": "Houndoom"},
      {"name": "Magnemite"},
      {"name": "Magneton"},
      {"name": "Magnezone"},
      {"name": "Tangela"},
      {"name": "Tangrowth"},
      {"name": "Yanma"},
      {"name": "Yanmega"},
      {"name": "Tropius"},
      {"name": "Rhyhorn"},
      {"name": "Rhydon"},
      {"name": "Rhyperior"},
      {"name": "Duskull"},
      {"name": "Dusclops"},
      {"name": "Dusknoir"},
      {"name": "Porygon"},
      {"name": "Porygon2"},
      {"name": "Porygon-Z"},
      {"name": "Scyther"},
      {"name": "Scizor"},
      {"name": "Elekid"},
      {"name": "Electabuzz"},
      {"name": "Electivire"},
      {"name": "Magby"},
      {"name": "Magmar"},
      {"name": "Magmortar"},
      {"name": "Swinub"},
      {"name": "Piloswine"},
      {"name": "Mamoswine"},
      {"name": "Snorunt"},
      {"name": "Glalie"},
      {"name": "Froslass"},
      {"name": "Absol"},
      {"name": "Uxie"},
      {"name": "Mesprit"},
      {"name": "Azelf"},
      {"name": "Dialga"},
      {"name": "Palkia"},
      {"name": "Giratina"},
      {"name": "Heatran"},
      {"name": "Regigigas"},
      {"name": "Phione"},
      {"name": "Manaphy"},
      {"name": "Cresselia"},
      {"name": "Darkrai"},
      {"name": "Shaymin"},
      {"name": "Arceus"},
  ],

  "gender_variant_list": [ "Venusaur", "Starly", "Staravia", "Staraptor", "Bibarel",
    "Kricketot", "Kricketune", "Shinx", "Luxio", "Luxray", "Kadabra", "Alakazam",
    "Magikarp", "Gyarados", "Roselia", "Roserade", "Zubat", "Golbat", "Crobat",
    "Steelix", "Beautifly", "Dustox", "Combee", "Pachirisu", "Heracross", "Aipom",
    "Ambipom", "Murkrow", "Goldeen", "Seaking", "Meditite", "Medicham", "Sudowoodo",
    "Pikachu", "Raichu", "Gible", "Gabite", "Garchomp", "Wooper", "Quagsire",
    "Girafarig", "Hippopotas", "Hippowdon", "Croagunk", "Toxicroak", "Octillery",
    "Finneon", "Lumineon", "Milotic", "Snover", "Abomasnow", "Sneasel", "Weavile",
    "Gligar", "Houndoom", "Tangrowth", "Rhyhorn", "Rhydon", "Rhyperior", "Scyther",
    "Scizor", "Piloswine", "Mamoswine",
  ],
}

},{}],2:[function(require,module,exports){
/* Data is stored in data.json */
var alldata = require('./data.json')
const full_list = alldata.full_species_list
const small_list = alldata.gender_variant_list

/* Classes */

class Pokemon {
  constructor(species, rank){
    this.species = species;
    this.nickname = "";
    this.rank = rank;
  }
}

class RankEditor {
  constructor(dec, rank, inc){
    this.dec = dec;
    this.rank = rank;
    this.inc = inc;
  }
  minusRank(){
    //ask: are you sure you want to decrease rank? ONLY do this if you accidentally increased the rank.
    if (true) {
      this.rank = this.rank - 1;
      //update the span to reflect the rank change
    }
  }
  addRank(){
    //ask: are you sure you want to increase rank? you may do this if you have finished a rank-up event or this companion has
    if (true) {
      this.rank = this.rank + 1;
    }
  }
}

/* Add entries to the "dex" div element.*/
let entry_template = `
  <h3></h3> <input></input> <img class='gndr'></img>
  <img class='portrait'></img>
`
//an extra div for ranking not included above.
let rank_template = `
  <p></p> <button class='decrement'></button>
      <span></span>
      <button class='increment'></button>
`
let entry_list = document.querySelector('.dex');

const select = document.getElementById('species')
const ranker = document.getElementById('rank')
const gender = document.getElementById('gender')
const submit = document.querySelector("[type='submit']")
const form = document.querySelector(".annex");

select.addEventListener('change', (event) => {
  checker(select, ranker, gender, submit);
})

let checker = function(input, input2, input3, submit) { //checks if a species is selected before allowing submission.
  const indexer = input.selectedIndex

  let i, j = input3.options.length - 1;
     for(i = j; i >= 0; i--) {
        input3.remove(i);
     } //removes the options, if added.

  if (indexer != 0) {
    const x = document.querySelectorAll('.hidden'); //selects the hidden labels and select elements.
    x.forEach((item) => { item.style.display = "inline"; } ) //makes them visible.
    submit.disabled = false;

    //updated loadRank()
    loadGender(input, input3) //loads appropriate genders.
  }
}

let loadGender = function(z, y) { //species, and gender select
  let crude = z.value
  let species = comparator(z.selectedIndex, crude).substr(4) //just want to trim the bit before, so comparator() is used.
  let genders = ["Male", "Female", "Genderless",]
  let final = []
  switch(species) {
    case 'Mothim':
    case 'Gallade':
      final.push(genders[0])
      break; //male only
    case 'Happiny':
    case 'Chansey':
    case 'Blissey':
    case 'Wormadam':
    case 'Vespiquen':
    case 'Froslass':
    case 'Cresselia':
      final.push(genders[1])
      break; //female only
    case 'Bronzor':
    case 'Bronzong':
    case 'Unown':
    case 'Rotom':
    case 'Magnemite':
    case 'Magneton':
    case 'Magnezone':
    case 'Porygon':
    case 'Porygon2':
    case 'Porygon-Z':
    case 'Uxie':
    case 'Mesprit':
    case 'Azelf':
    case 'Dialga':
    case 'Palkia':
    case 'Giratina':
    case 'Heatran':
    case 'Regigigas':
    case 'Phione':
    case 'Manaphy':
    case 'Darkrai':
    case 'Shaymin':
    case 'Arceus':
      final.push(genders[2])
      break; //genderless
    default:
      final.push(genders[0])
      final.push(genders[1])
  }
  final.forEach((item) => {
    let option = document.createElement("option")
    option.text = item
    y.add(option)
  });
}

form.addEventListener('submit', (event) => {
  event.preventDefault();
  if (party.length < 4) { //max party of 4.
    adder(select, ranker, gender);
  } else {
    alert("You've reached the maximum capacity of your party.\nPlease use the PC.")
  }
  resetter(select, submit);
})

let adder = function(input, input2, input3) { //adds a Pokemon to the dex, and the party array.
  let entry = document.createElement("div");
  entry.setAttribute("class", "entry");
  entry.innerHTML = entry_template;

  let name = comparator(input.selectedIndex, input.value)

  entry.querySelector("h3").innerText = "#"+input.selectedIndex; //the pokedex number.
  entry.appendChild(adderHelper(input2.value) ); //the rank.
  //entry.querySelector("h4").innerText = "Rank: "+input2.value; //the rank.
  entry.querySelector("input").placeholder = name.substr(4);
  entry.querySelector("input").setAttribute("maxlength", "12");
  entry.querySelector(".gndr").src = "images/icons/Sign_" + input3.value + ".png"; //gender.
  entry.querySelector(".portrait").src = "images/sprites_full/" + name + variator(input, input3.value) + ".gif";


  entry_list.appendChild(entry);

  partyAdd(party, input.value, input2.value);
}

let adderHelper = function (actual_rank){
  let ranking = document.createElement("div");
  ranking.setAttribute("class", "ranking");
  ranking.innerHTML = rank_template;

  ranking.querySelector("p").innerText = "Rank: ";
  ranking.querySelector(".decrement").innerHTML = "-";
  ranking.querySelector("span").innerHTML = actual_rank;
  ranking.querySelector(".increment").innerHTML = "+";

  return ranking;
}

let comparator = function (index, value) {
  let first = "";
  let second = "";
  if (index < 10) {
    first = "00" + index + "_";
    second = value.substr(3); //substring trims the numbering added by loadDex.
  } else if (index < 100) {
    first = "0" + index + "_";
    second = value.substr(4);
  } else {
    first = index + "_";
    second = value.substr(5);
  }
  let final = first + second;
  return final;
}

let variator = function (species, gender) {
  let gendervar = "";
  let spc = comparator(species.selectedIndex, species.value).substr(4); //trims species value.
  if (small_list.includes(spc)) {
    gendervar = gendervar + gender;
  }
  return gendervar;
}

let resetter = function(input, submit) { //resets the form to onload state.
  input[0].selected = true
  submit.disabled = true
  document.getElementById("rank")[0].selected = true //selects rank 1 on reset.

  const x = document.querySelectorAll('.hidden'); //selects the visible labels and select elements.
  x.forEach((item) => { item.style.display = "none"; } ) //makes them hidden.
}


/* Dex Functions */
const party = [];

let partyAdd = function(party, a, b) { //adds newly added Pokemon to the party array.
  party.push( {"name": a, "rank": b,/* "health": c, */})
}


/* On window load, the species and rank selects in the annex form will get filled. */
let loadDex = function(list) { //loads species.
  console.log("Loaded!");
  let i = 0;
  list.forEach((pokemon) => {
    let species = document.querySelector("[id='species']")
    let option = document.createElement("option")
    i += 1;
    option.text = i + ". " + pokemon.name;
    species.add(option);
  });
}

let loadRank = function() { //loads ranks.
  console.log("Also loaded!");

  let ranker = document.querySelector("[id='rank']")
  var i;
  for (i = 0; i < 10; i++) {
    let rank = document.createElement("option")
    rank.text = i+1
    ranker.add(rank)
  }
}

window.addEventListener("load", (event) => { //calls the loading functions on window load.
  loadDex(full_list);
  loadRank();
  });

},{"./data.json":1}]},{},[2]);
