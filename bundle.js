(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
module.exports={
  "full_species_list":[
      {"name": "Bulbasaur"},
      {"name": "Ivysaur"},
      {"name": "Venusaur"},
      {"name": "Charmander"},
      {"name": "Charmeleon"},
      {"name": "Charizard"},
      {"name": "Squirtle"},
      {"name": "Wartortle"},
      {"name": "Blastoise"},
      {"name": "Chespin"},
      {"name": "Quilladin"},
      {"name": "Chesnaught"},
      {"name": "Fennekin"},
      {"name": "Braixen"},
      {"name": "Delphox"},
      {"name": "Froakie"},
      {"name": "Frogadier"},
      {"name": "Greninja"},
      {"name": "Turtwig"},
      {"name": "Grotle"},
      {"name": "Torterra"},
      {"name": "Chimchar"},
      {"name": "Monferno"},
      {"name": "Infernape"},
      {"name": "Piplup"},
      {"name": "Prinplup"},
      {"name": "Empoleon"},
      {"name": "Starly"},
      {"name": "Staravia"},
      {"name": "Staraptor"},
      {"name": "Bidoof"},
      {"name": "Bibarel"},
      {"name": "Kricketot"},
      {"name": "Kricketune"},
      {"name": "Shinx"},
      {"name": "Luxio"},
      {"name": "Luxray"},
      {"name": "Abra"},
      {"name": "Kadabra"},
      {"name": "Alakazam"},
      {"name": "Magikarp"},
      {"name": "Gyarados"},
      {"name": "Budew"},
      {"name": "Roselia"},
      {"name": "Roserade"},
      {"name": "Zubat"},
      {"name": "Golbat"},
      {"name": "Crobat"},
      {"name": "Geodude"},
      {"name": "Graveler"},
      {"name": "Golem"},
      {"name": "Onix"},
      {"name": "Steelix"},
      {"name": "Cranidos"},
      {"name": "Rampardos"},
      {"name": "Shieldon"},
      {"name": "Bastiodon"},
      {"name": "Machop"},
      {"name": "Machoke"},
      {"name": "Machamp"},
      {"name": "Psyduck"},
      {"name": "Golduck"},
      {"name": "Burmy"},
      {"name": "Wormadam"},
      {"name": "Mothim"},
      {"name": "Wurmple"},
      {"name": "Silcoon"},
      {"name": "Beautifly"},
      {"name": "Cascoon"},
      {"name": "Dustox"},
      {"name": "Combee"},
      {"name": "Vespiquen"},
      {"name": "Pachirisu"},
      {"name": "Buizel"},
      {"name": "Floatzel"},
      {"name": "Cherubi"},
      {"name": "Cherrim"},
      {"name": "Shellos"},
      {"name": "Gastrodon"},
      {"name": "Heracross"},
      {"name": "Aipom"},
      {"name": "Ambipom"},
      {"name": "Drifloon"},
      {"name": "Drifblim"},
      {"name": "Buneary"},
      {"name": "Lopunny"},
      {"name": "Gastly"},
      {"name": "Haunter"},
      {"name": "Gengar"},
      {"name": "Misdreavus"},
      {"name": "Mismagius"},
      {"name": "Murkrow"},
      {"name": "Honchkrow"},
      {"name": "Glameow"},
      {"name": "Purugly"},
      {"name": "Goldeen"},
      {"name": "Seaking"},
      {"name": "Barboach"},
      {"name": "Whiscash"},
      {"name": "Chingling"},
      {"name": "Chimecho"},
      {"name": "Stunky"},
      {"name": "Skuntank"},
      {"name": "Meditite"},
      {"name": "Medicham"},
      {"name": "Bronzor"},
      {"name": "Bronzong"},
      {"name": "Ponyta"},
      {"name": "Rapidash"},
      {"name": "Bonsly"},
      {"name": "Sudowoodo"},
      {"name": "Mime Jr."},
      {"name": "Mr. Mime"},
      {"name": "Happiny"},
      {"name": "Chansey"},
      {"name": "Blissey"},
      {"name": "Cleffa"},
      {"name": "Clefairy"},
      {"name": "Clefable"},
      {"name": "Chatot"},
      {"name": "Pichu"},
      {"name": "Pikachu"},
      {"name": "Raichu"},
      {"name": "Hoothoot"},
      {"name": "Noctowl"},
      {"name": "Spiritomb"},
      {"name": "Gible"},
      {"name": "Gabite"},
      {"name": "Garchomp"},
      {"name": "Munchlax"},
      {"name": "Snorlax"},
      {"name": "Unown"},
      {"name": "Riolu"},
      {"name": "Lucario"},
      {"name": "Wooper"},
      {"name": "Quagsire"},
      {"name": "Wingull"},
      {"name": "Pelipper"},
      {"name": "Girafarig"},
      {"name": "Hippopotas"},
      {"name": "Hippowdon"},
      {"name": "Azurill"},
      {"name": "Marill"},
      {"name": "Azumarill"},
      {"name": "Skorupi"},
      {"name": "Drapion"},
      {"name": "Croagunk"},
      {"name": "Toxicroak"},
      {"name": "Carnivine"},
      {"name": "Remoraid"},
      {"name": "Octillery"},
      {"name": "Finneon"},
      {"name": "Lumineon"},
      {"name": "Tentacool"},
      {"name": "Tentacruel"},
      {"name": "Feebas"},
      {"name": "Milotic"},
      {"name": "Mantyke"},
      {"name": "Mantine"},
      {"name": "Snover"},
      {"name": "Abomasnow"},
      {"name": "Sneasel"},
      {"name": "Weavile"},
      {"name": "Rotom"},
      {"name": "Gligar"},
      {"name": "Gliscor"},
      {"name": "Nosepass"},
      {"name": "Probopass"},
      {"name": "Ralts"},
      {"name": "Kirlia"},
      {"name": "Gardevoir"},
      {"name": "Gallade"},
      {"name": "Lickitung"},
      {"name": "Lickilicky"},
      {"name": "Eevee"},
      {"name": "Vaporeon"},
      {"name": "Jolteon"},
      {"name": "Flareon"},
      {"name": "Espeon"},
      {"name": "Umbreon"},
      {"name": "Leafeon"},
      {"name": "Glaceon"},
      {"name": "Sylveon"},
      {"name": "Swablu"},
      {"name": "Altaria"},
      {"name": "Togepi"},
      {"name": "Togetic"},
      {"name": "Togekiss"},
      {"name": "Houndour"},
      {"name": "Houndoom"},
      {"name": "Magnemite"},
      {"name": "Magneton"},
      {"name": "Magnezone"},
      {"name": "Tangela"},
      {"name": "Tangrowth"},
      {"name": "Yanma"},
      {"name": "Yanmega"},
      {"name": "Tropius"},
      {"name": "Rhyhorn"},
      {"name": "Rhydon"},
      {"name": "Rhyperior"},
      {"name": "Duskull"},
      {"name": "Dusclops"},
      {"name": "Dusknoir"},
      {"name": "Porygon"},
      {"name": "Porygon2"},
      {"name": "Porygon-Z"},
      {"name": "Scyther"},
      {"name": "Scizor"},
      {"name": "Elekid"},
      {"name": "Electabuzz"},
      {"name": "Electivire"},
      {"name": "Magby"},
      {"name": "Magmar"},
      {"name": "Magmortar"},
      {"name": "Swinub"},
      {"name": "Piloswine"},
      {"name": "Mamoswine"},
      {"name": "Snorunt"},
      {"name": "Glalie"},
      {"name": "Froslass"},
      {"name": "Absol"},
      {"name": "Uxie"},
      {"name": "Mesprit"},
      {"name": "Azelf"},
      {"name": "Dialga"},
      {"name": "Palkia"},
      {"name": "Giratina"},
      {"name": "Heatran"},
      {"name": "Regigigas"},
      {"name": "Phione"},
      {"name": "Manaphy"},
      {"name": "Cresselia"},
      {"name": "Darkrai"},
      {"name": "Shaymin"},
      {"name": "Arceus"},
  ]
}

},{}],2:[function(require,module,exports){
/* Data is stored in data.json */
var alldata = require('./data.json')
const full_list = alldata.full_species_list

/* Classes */
/*class Pokemon {
  constructor(name, rank, health){
    this.name = name;
    this.rank = rank;
    this.health = health;
  }
}*/


/* Add entries to the "dex" div element.*/
let entry_template = `
  <h3></h3> <h4></h4>
  <p></p>
  <img></img>
`
let entry_list = document.querySelector('.dex');

const select = document.getElementById('species')
const ranker = document.getElementById('rank')
const submit = document.querySelector("[type='submit']")
const form = document.querySelector(".annex");

select.addEventListener('click', (event) => {
  checker(select, submit);
})

let checker = function(input, submit) { //checks if a species is selected before allowing submission.
  const indexer = input.selectedIndex
  if (indexer != 0) {
    submit.disabled = false
  }
}

form.addEventListener('submit', (event) => {
  event.preventDefault();
  if (party.length < 4) { //max party of 4.
    adder(select, ranker);
  } else {
    alert("You've reached the maximum capacity of your party.\nPlease use the PC.")
  }
  resetter(select, submit);
})

let adder = function(input, input2) { //adds a Pokemon to the dex, and the party array.
  let entry = document.createElement("div");
  entry.setAttribute("class", "entry");
  entry.innerHTML = entry_template;

  entry.querySelector("h3").innerText = "#"+input.selectedIndex;
  entry.querySelector("h4").innerText = "Rank: "+input2.value;
  entry.querySelector("p").innerText = input.value;
  entry.querySelector("img").src = "images/sprites_full/" + comparator(input.selectedIndex, input.value) + ".gif";
  entry.querySelector("img").setAttribute("class", "portrait");

  entry_list.appendChild(entry);

  partyAdd(party, input.value, input2.value);
}
let comparator = function (index, value) {
  let first = "";
  let second = "";
  if (index < 10) {
    first = "00" + index + "_";
    second = value.substr(3); //substring trims the numbering added by loadDex.
  } else if (index < 100) {
    first = "0" + index + "_";
    second = value.substr(4);
  } else {
    first = index + "_";
    second = value.substr(5);
  }
  let final = first + second;
  return final;
}

let resetter = function(input, submit) { //resets the form to onload state.
  input[0].selected = true
  submit.disabled = true
  document.getElementById("rank")[0].selected = true //selects rank 1 on reset.
}


/* Dex Functions */
const party = [];

let partyAdd = function(party, a, b) { //adds newly added Pokemon to the party array.
  party.push( {"name": a, "rank": b,/* "health": c, */})
}


/* On window load, the species and rank selects in the annex form will get filled. */
let loadDex = function(list) { //loads species.
  console.log("Loaded!");
  let i = 0;
  list.forEach((pokemon) => {
    let species = document.querySelector("[id='species']")
    let option = document.createElement("option")
    i += 1;
    option.text = i + ". " + pokemon.name;
    species.add(option);
  });
}

let loadRank = function() { //loads ranks.
  console.log("Also loaded!");

  let ranker = document.querySelector("[id='rank']")
  var i;
  for (i = 0; i < 10; i++) {
    let rank = document.createElement("option")
    rank.text = i+1
    ranker.add(rank)
  }
}

window.addEventListener("load", (event) => { //calls the loading functions on window load.
  loadDex(full_list);
  loadRank();
  });

},{"./data.json":1}]},{},[2]);
